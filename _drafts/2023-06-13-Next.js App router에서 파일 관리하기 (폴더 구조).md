---
title: Next.js App router에서 파일 관리하기 (폴더 구조)
date: 2023-06-13 12:00 +0900
categories: [Development, Web]
tags: [next.js, app router]
---
Next.js 13.3 버전부터 App Router(일부는 App Directory라고 하기고 하더라)가 Stable로 승격되면서 pages를 사용하던 이전 프로젝트에서 관리하던 폴더 구조(Directory Structure)에 대한 생각을 해 보아야 겠다는 생각을 하게 되었다.
# App Router
## Folder Structure
App router는 기존 `pages/` 아래에 파일 이름으로 Route를 생성하던 것과 달리 `app/` 폴더 안에 폴더 이름으로 Route를 생성한다. 즉 다음과 같은 변화가 있다
- 일반적인 Nested Route
	- `pages/foo/bar.tsx`
	- `app/foo/bar/page.tsx`
- Catch Route
	- `pages/foo/[id].tsx`
	- `app/foo/[id]/page.tsx`
- Catch Nested Routes
	- `pages/foo/[...slug].tsx`
	- `app/foo/[...slug]/page.tsx`
- Catch All Nexted Routes
	- `pages/foo/[[...slug]].tsx`
	- `app/foo/[[...slug]]/page.tsx`
이런 차이로 생기는 장점은 app directory에 내 마음대로 파일을 넣어도 Route에 영향을 미치지 않는다는 점이다. 따라서 `pages/` 폴더를 사용할 때 (즉 page router를 사용할 때) view라는 이름으로 따로 폴더를 만들거나 그럴 필요가 없어졌다는 것이다.
실제로 나는 이전에 대형 프로젝트를 진행할 때 Fragment, Fragment Group, Section, Modal, Page, Component이라는 개념을 새로 만들어서 사용했던 적이 있다. 그때 사용했던 기준은 다음과 같았다.
- Fragment
	- 독립된 URL을 가지지는 않지만, 화면 전체를 차지하는 UI Component를 말한다. 
	- Fragment를 사용하는 Page에서만 사용되어야 한다.
	- `fragment/(fragment group name)/`에 위치한다
- Fragment Group
	- 같은 URL에서 보여지는 Fragment들의 집합이다.
	- 한 Fragment Group은 `fragement/`의 하위 디렉토리에 위치하여야 한다.
- Section
	- Fragment 또는 Page가 너무 커지는 것을 방지하기 위해 사용한다
	- Fragment 또는 Page에서만 사용되어야 한다
	- 기능이 명확하여야 한다
	- 한 Fragment Group 또는 Page에서 사용될 경우 `sections/(fragment group name)/` 또는 `sections/(page name)/`에 위치할 수 있다.
- Modal
	- 화면 전체를 가리지만 배경이 투명한 Ui Component 이다
- Page
	- URL을 가지는 하나의 페이지이다.
- Component
	- 여러 Fragment, Page 또는 Section에서 사용되는 UI Component이다.
이러한 구분 기준을 가지고 구분하였던 적이 있지만, App Router가 나오면서 이러한 구분을 하는 이유가 흐릿해지기 시작했다. 왜냐하면 필요한 Component들은 그 자리에 놓으면 되기 때문이다. 또한 App Router는 RSC(React Server Components)를 적극적으로 사용하기 때문에, 이러한 구분이 많이 필요하지도 않다.
## React Server Component
Next.js 13.3 버전 이전에도 getStaticProps, getServerSideProps와 같은 방법을 통해 Frontend Engineer가 Backend에 근접한 업무를 하게 될 것이라는 생각은 하고 있었지만, React Server Component가 나오면서 이러하