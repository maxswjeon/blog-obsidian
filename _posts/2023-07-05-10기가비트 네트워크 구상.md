---
title: 10Gbit 네트워크 구상
date: 2023-07-06 02:00:00 +0900
categories: [Development, Etc]
tags: [network, infrastructure]
---
이번에 해킨토시를 구축하면서, 문제 아닌 문제가 좀 생겼다. 바로 서버가 없어졌다는 것이다. 뭐 내 선택이니까 누굴 원망하고 그런것도 없다니와 그냥 그럴 뿐인 것이다.  
서버가 없어졌으니 내 NAS에 들어간 하드디스크를 지금 mac에 물려놓고 있는데, 가장 좋은 건 macOS도 BSD 기반이라 ZFS가 된다는 것이다. 적당히 급할 때 컴퓨터 켜서, 데이터 뺴오고, 컴퓨터 끄는 습관을 들이는 데 가장 좋다.  
다만 걱정되는 건 ZFS는 주기적으로 Scrub을 돌려 데이터 오류를 해결해 줘야 한다는 것이다. 이건 ZFS가 오류를 내서가 아니라, 용량이 많은 NAS를 운영하면 자연적으로 하드디스크에 Bit Flip과 같은 오류가 발생하게 되고, 이는 나중에 데이터 읽기 시에 치명적인 오류를 일으킬 수 있기 때문이다. 나는 RAID-Z2를 쓰니까 하드디스크 2개가 죽어도 데이터가 살아있지만, 아직 123 백업 규칙을 지킬 정도는 아니라 조금 걱정이 되긴 한다.
# 10기가비트 네트워크 구상
## 개요
10기가비트 네트워크를 구상하게 된 건 그냥 하나의 호기심이기도 하고, 서버를 다시 세팅한다는 가정 하에 하는 구상이다. 10기가비트. 누가 들어도 좋지 않나. 하하.  
일단 우리 집은 500Mbps 인터넷을 쓰고 있다. 1980년대에 지어진 아파트라, 내벽에 UTP도 겨우 설치했다는 이야기를 언젠가 들은 적이 있다. 그때는 전화선 밖에 없었다고... 그래서 UTP를 저층은 우수관을, 고층은 외벽을 따라 설치한다. (광케이블 들어오는 신축으로 이사가고싶다...)
그리고 집 내부에 있는 케이블들도 Cat.5e라 RJ45를 쓰고 있다. 하나 예외가 있다면, 내 방과 거실을 잇는 케이블은 벽을 통과해서 쓰고 있어서, 잘하면 광케이블을 넣을 수도 있을 거 같다는 생각이 들었다는 거다.
일단 그럼 생각해봐야 할 게 다음과 같다
1. WAN은 RJ45로 들어온다
2. 동생 방으로 이어지는 RJ45는 Cat.5e 선이라 1Gbps가 최대이다
3. 메인 WiFi 라우터는 RJ45를 사용하거나, 라우터에서 PCIe를 지원하면 OpenWRT를 설치하여 사용한다
4. 내 방으로 이어지는 RJ45는 STP로 바꿀 수 있다.
그럼 결국 내 방에만 10Gbps로 깔면 안되나 싶긴 하다. 근데 이것도 조금 조심스러운 부분이 있다.
## 현재 네트워크 구성
현재 네트워크 구성은 다음과 같다
- 10.0.0.0/24: 무선 네트워크 이용 대역
- 10.0.10.0/24: 서버 네트워크 (전에 실물 서버가 이 대역에 물려 있어서, 지금은 내 컴퓨터 대역이다)
- 10.0.20.0/24: 데스크톱 네트워크 (전에 내 방에 데스크톱이 있었을 때 이 대역을 사용했다)
- 10.0.30.0/24: 